(this["webpackJsonpsecond-task"]=this["webpackJsonpsecond-task"]||[]).push([[0],[,,,,function(e,t,a){e.exports={categories:"style_categories__3Bvn9",header:"style_header__1Bbz6",aside:"style_aside__24MA-",contentWrapper:"style_contentWrapper__2YQOO",content:"style_content__-qyxJ",asideRow:"style_asideRow__3r2g9",pokemonModal:"style_pokemonModal__28LW0",pokemonModalClose:"style_pokemonModalClose__1AwU-",modalImage:"style_modalImage__15FrX",modalContent:"style_modalContent__1_bFm",modalParams:"style_modalParams__cvbx_",modalParamsItem:"style_modalParamsItem__1Kk_C",detailsButton:"style_detailsButton__3Hz6V"}},function(e,t,a){e.exports={card:"style_card__3-Qji",headerWrapper:"style_headerWrapper__aJHD2",contentRow:"style_contentRow__3atAh",content:"style_content__vzU7I",image:"style_image__3dT1F",params:"style_params__1hvtD",mainParams:"style_mainParams__ewQsW",secondaryParams:"style_secondaryParams__JrJp7",paramsItem:"style_paramsItem__1Kgt8",description:"style_description__2w5yO"}},,,function(e,t,a){e.exports={select:"style_select__SSi00",active:"style_active__2ATw3",selectInput:"style_selectInput__1jsvD",selectDropdown:"style_selectDropdown__PXfrq",selectSearch:"style_selectSearch__28NG7",selectList:"style_selectList__PEziK",selectItem:"style_selectItem__3ylIK",button:"style_button__2dhm0",activeButton:"style_activeButton__kPYzz"}},,,,,,function(e,t,a){e.exports={pagination:"style_pagination__1Gfmx",paginationItem:"style_paginationItem__8s7BP",button:"style_button__2Ph7M",activebutton:"style_activebutton__XYxbC"}},,function(e,t,a){e.exports={form:"style_form__2_OVs",row:"style_row__1Rf0M",buttonWrap:"style_buttonWrap__2K26G",link:"style_link__ApLHD"}},,,,,function(e,t,a){e.exports={label:"style_label__Oz9c3",title:"style_title__6raTd",input:"style_input__4-FVI",message:"style_message__1-SiV"}},function(e,t,a){e.exports={form:"style_form__GVY6t",row:"style_row__kICVi",buttonWrap:"style_buttonWrap__2MrGH",link:"style_link__AEjRH"}},function(e,t,a){e.exports={pokemon:"style_pokemon__295Ft",image:"style_image__1oS8E",name:"style_name__1JtxO",link:"style_link__1bZ1U"}},,,,,,function(e,t,a){e.exports={header:"style_header__3_cQf",headerLogut:"style_headerLogut__9yXkt",link:"style_link__2spVX"}},,,,,function(e,t,a){e.exports={layout:"style_layout__3W-kT",content:"style_content__NCbOz"}},,,,,,,function(e,t,a){e.exports={mainLayout:"style_mainLayout__2Qxav"}},function(e,t,a){e.exports={button:"style_button__2r0r9"}},function(e,t,a){e.exports={contentLayout:"style_contentLayout__3AhP0"}},function(e,t,a){e.exports={button:"style_button__1TlsE"}},function(e,t,a){e.exports={loader:"style_loader__13fgc","lds-ring":"style_lds-ring__YFace"}},function(e,t,a){e.exports={message:"style_message__1Sxsh"}},,function(e,t,a){e.exports=a(60)},,,,,function(e,t,a){},,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(38),c=a.n(s),l=a(9),o=(a(53),a(15)),m=a.n(o),i=a(24),u=a(1),p=a(2),_=a(11),d="https://api.pokemontcg.io/v1/",E=Object(n.createContext)([]);var y=function(e){var t=e.children,a={pokemons:[],types:[],subtypes:[],page:"1",totalCount:0,lastPage:0,pageSize:10,typesValue:"",subtypesValue:"",isLoading:!1,pokemon:null},s=Object(n.useReducer)((function(e,t){var n=t.type,r=t.payload;switch(n){case"SET_POKEMONS":return Object(_.a)({},e,{pokemons:r});case"SET_POKEMONS_TYPES":return Object(_.a)({},e,{types:r});case"SET_POKEMONS_SUBTYPES":return Object(_.a)({},e,{subtypes:r});case"SET_TYPES_VALUE":return Object(_.a)({},e,{typesValue:r});case"SET_SUBTYPES_VALUE":return Object(_.a)({},e,{subtypesValue:r});case"SET_LOADING":return Object(_.a)({},e,{isLoading:r});case"SET_POKEMON":return Object(_.a)({},e,{pokemon:r});case"SET_PAGE":return Object(_.a)({},e,{page:r});case"CLEAR_STATE":return a;case"SET_TOTAL_COUNT":return Object(_.a)({},e,{totalCount:r,lastPage:String(Math.floor(r/e.pageSize))});default:return e}}),a),c=Object(u.a)(s,2),l=c[0],o=c[1];return r.a.createElement(E.Provider,{value:[l,o]},t)},v=Object(n.createContext)();var f=function(e){var t=e.children,a=Object(n.useReducer)((function(e,t){var a=t.type,n=t.payload;switch(a){case"SET_AUTH":return Object(_.a)({},e,{isLoggedIn:n});default:return e}}),{isLoggedIn:!1,users:[{login:"kode@kode.ru",password:"Enk0deng"}]}),s=Object(u.a)(a,2),c=s[0],l=s[1];return r.a.createElement(v.Provider,{value:[c,l]},t)},b=a(28),g=a(16),O=a.n(g),N=a(41),h=a.n(N);var S=function(e){var t=e.children;return r.a.createElement("div",{className:h.a.mainLayout},t)},j=a(21),k=a.n(j);var T=function(e){var t=e.title,a=e.name,n=e.type,s=e.placeholder,c=e.inputChangeHandler,l=e.value,o=e.touched,m=e.message;return r.a.createElement("label",{className:k.a.label},r.a.createElement("span",{className:k.a.title},t),r.a.createElement("input",{autoComplete:"off",className:k.a.input,type:n,name:a,value:l,placeholder:s,onInput:c}),o&&m&&r.a.createElement("p",{className:k.a.message},m))},w=a(42),P=a.n(w);var x=function(e){var t=e.clickHandler;return r.a.createElement("button",{className:P.a.button,onClick:t,type:"submit"})},C=function(e){var t=e.name,a=e.password,n={};return t?t.length<4&&(n.name="\u0414\u043b\u0438\u043d\u0430 \u043f\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 4 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u0441\u0435\u0439\u0447\u0430\u0441 ".concat(t.length)):n.name="\u042d\u0442\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435",a?a.length<6&&(n.password="\u0414\u043b\u0438\u043d\u0430 \u043f\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u0441\u0435\u0439\u0447\u0430\u0441 ".concat(a.length)):n.password="\u042d\u0442\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435",n};var I=function(){var e=Object(p.f)(),t=Object(n.useContext)(v),a=Object(u.a)(t,2),s=a[0].users,c=a[1],o=Object(b.a)({initialValues:{name:"",password:""},validate:C,onSubmit:function(){var t=s.find((function(e){return e.login===d}));t&&t.password===E&&(c({type:"SET_AUTH",payload:!0}),e.push("/"))}}),m=o.handleSubmit,i=o.handleChange,_=o.values,d=_.name,E=_.password,y=o.errors,f=o.touched;return r.a.createElement(S,null,r.a.createElement("form",{method:"POST",action:"/",className:O.a.form,onSubmit:m},r.a.createElement("div",{className:O.a.row},r.a.createElement(T,{title:"Login",name:"name",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",value:d,inputChangeHandler:i,touched:f.name,message:y.name})),r.a.createElement("div",{className:O.a.row},r.a.createElement(T,{title:"Password",name:"password",type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",value:E,inputChangeHandler:i,touched:f.password,message:y.password})),r.a.createElement("div",{className:O.a.buttonWrap},r.a.createElement(x,null)),r.a.createElement(l.b,{to:"/password-confirmation",className:O.a.link},"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u0434\u043d\u043e\u0440\u0430\u0437\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c")))},L=a(22),A=a.n(L);var M=function(){var e=Object(p.f)(),t=Object(n.useContext)(v),a=Object(u.a)(t,2)[1],s=Object(n.useState)("1234"),c=Object(u.a)(s,2),o=c[0],m=c[1];Object(n.useEffect)((function(){var e=String(Math.random()).slice(2,2+Math.max(1,Math.min(4)));m(e),alert("\u041f\u0430\u0440\u043e\u043b\u044c: ".concat(e))}),[]);var i=Object(b.a)({initialValues:{password:""},validate:function(e){var t=e.password,a={};return console.log(t,o),t!==o&&(a.password="\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"),a},onSubmit:function(){a({type:"SET_AUTH",payload:!0}),e.push("/")}}),_=i.handleSubmit,d=i.handleChange,E=i.values.password,y=i.errors,f=i.touched;return r.a.createElement(S,null,r.a.createElement("form",{method:"POST",action:"/",className:A.a.form,onSubmit:_},r.a.createElement("div",{className:A.a.row},r.a.createElement(T,{title:"Code from SMS",name:"password",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u0421\u041c\u0421",value:E,inputChangeHandler:d,touched:f.password,message:y.password})),r.a.createElement("div",{className:A.a.buttonWrap},r.a.createElement(x,null)),r.a.createElement(l.b,{to:"/login",className:A.a.link},"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c")))};var V=function(e,t){Object(n.useEffect)((function(){var a=function(a){e.current&&!e.current.contains(a.target)&&t(a)};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),function(){document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}}),[e,t])},U=a(4),H=a.n(U),R=a(43),B=a.n(R);var F=function(e){var t=e.children;return r.a.createElement("div",{className:B.a.contentLayout},t)},W=a(29),K=a.n(W),Y=a(44),z=a.n(Y);var D=function(e){var t=e.children,a=e.clickHandler;return r.a.createElement("button",{onClick:a,className:z.a.button},t)};var G=function(){var e=Object(n.useContext)(v),t=Object(u.a)(e,2)[1],a=Object(n.useContext)(E),s=Object(u.a)(a,2)[1];return r.a.createElement("header",{className:K.a.header},r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/card-page"},r.a.createElement(l.b,{className:K.a.link,to:"/"},"< Back"))),r.a.createElement("div",{className:K.a.headerLogut},r.a.createElement(D,{clickHandler:function(){t({type:"SET_AUTH",payload:!1}),s({type:"CLEAR_STATE"})}},"Logout")))},J=a(47),Q=a(8),X=a.n(Q);var q=function(e){var t=e.name,a=e.list,s=e.setTypesValue,c=e.value,l=void 0===c?"":c,o=Object(n.useState)(!1),m=Object(u.a)(o,2),i=m[0],p=m[1],_=Object(n.useState)([X.a.select]),d=Object(u.a)(_,2),E=d[0],y=d[1],v=Object(n.useState)(a),f=Object(u.a)(v,2),b=f[0],g=f[1],O=function(e){var t=[X.a.button];return l===e&&t.push(X.a.activeButton),t.join(" ")},N=function(e){e?(p(!1),y([X.a.select])):(p(!i),-1!==E.indexOf(X.a.active)?y(E.filter((function(e){return e!==X.a.active}))):y([].concat(Object(J.a)(E),[X.a.active])))};Object(n.useEffect)((function(){g(a)}),[a]);var h=Object(n.useRef)();return V(h,(function(){return N(!0)})),r.a.createElement("div",{ref:h,className:E.join(" ")},r.a.createElement("div",{className:X.a.selectInput,onClick:function(){return N()}},l||t),i&&r.a.createElement("div",{className:X.a.selectDropdown},r.a.createElement("input",{type:"text",className:X.a.selectSearch,placeholder:"Type something...",onInput:function(e){var t=a.filter((function(t){return t.toLowerCase().includes(e.target.value.trim().toLowerCase())}));g(t)}}),r.a.createElement("ul",{className:X.a.selectList},b.map((function(e){return r.a.createElement("li",{key:e,className:X.a.selectItem},r.a.createElement("button",{className:O(e),onClick:function(){s({filter:t,value:e})},type:"button"},e))})))))},Z=a(45),$=a.n(Z);var ee=function(){return r.a.createElement("div",{className:$.a.loader},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},te=a(23),ae=a.n(te);var ne=function(e){var t=e.id,a=e.image,n=e.name,s=e.artist,c=e.setPokemonPreview;return r.a.createElement("article",{onClick:function(){return c(t)},className:ae.a.pokemon},r.a.createElement("img",{className:ae.a.image,src:a,alt:n}),r.a.createElement("p",{className:ae.a.name},n),r.a.createElement("p",{className:ae.a.artist},s))},re=a(46),se=a.n(re);var ce=function(e){var t=e.children;return r.a.createElement("p",{className:se.a.message},t)},le=a(14),oe=a.n(le);var me=function(){var e=Object(n.useContext)(E),t=Object(u.a)(e,2),a=t[0],s=a.page,c=a.lastPage,l=t[1],o=Object(n.useState)([]),m=Object(u.a)(o,2),i=m[0],p=m[1],_=Number(s);Object(n.useEffect)((function(){p(_<=3?["1","2","3","4","5"]:_>c-3?[String(c-4),String(c-3),String(c-2),String(c-1),c]:[String(s-2),String(s-1),s,String(_+1),String(_+2)])}),[s,_,c]);var d=function(e){l({type:"SET_PAGE",payload:e})};return r.a.createElement("ul",{className:oe.a.pagination},1!==_&&r.a.createElement("li",{className:oe.a.paginationItem},r.a.createElement("button",{onClick:function(){return d("1")},className:oe.a.button,type:"button"},"First")),i.map((function(e){var t=e===s?oe.a.activebutton:oe.a.button;return r.a.createElement("li",{key:e,className:oe.a.paginationItem},r.a.createElement("button",{onClick:function(){return d(e)},className:t,type:"button"},e))})),_!==Number(c)&&r.a.createElement("li",{className:oe.a.paginationItem},r.a.createElement("button",{onClick:function(){return d(String(c))},className:oe.a.button,type:"button"},"Last")))},ie=a(34),ue=a.n(ie);var pe=function(e){var t=e.children;return r.a.createElement("div",{className:ue.a.layout},r.a.createElement("div",{className:ue.a.content},t))};var _e=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],s=t[1],c=Object(n.useContext)(E),o=Object(u.a)(c,2),p=o[0],_=p.pokemons,y=p.pokemon,v=p.types,f=p.subtypes,b=p.isLoading,g=p.typesValue,O=p.subtypesValue,N=o[1];function h(e){var t=e.filter,a=e.value;"Type"===t?N({type:"SET_TYPES_VALUE",payload:a}):"Subtype"===t&&N({type:"SET_SUBTYPES_VALUE",payload:a})}Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(m.a.mark((function e(){var t,a,n,r,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"types"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,n=a.types,N({type:"SET_POKEMONS_TYPES",payload:n}),e.next=10,fetch("".concat(d,"subtypes"));case 10:return r=e.sent,e.next=13,r.json();case 13:s=e.sent,c=s.subtypes,N({type:"SET_POKEMONS_SUBTYPES",payload:c});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[N]);var S=function(e){var t=_.find((function(t){return t.id===e}));N({type:"SET_POKEMON",payload:t}),s(!0)},j=Object(n.useRef)();return V(j,(function(){return s(!1)})),r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(pe,null,r.a.createElement("div",{ref:j,className:H.a.pokemonModal},r.a.createElement("button",{className:H.a.pokemonModalClose,type:"button",onClick:function(){return s(!1)}}),y&&r.a.createElement("div",{className:H.a.modalContent},r.a.createElement("img",{src:y.imageUrlHiRes,alt:y.name,className:H.a.modalImage}),r.a.createElement("div",null,r.a.createElement("ul",{className:H.a.modalParams},r.a.createElement("li",{className:H.a.modalParamsItem},"Name: ",y.name),r.a.createElement("li",{className:H.a.modalParamsItem},"Rarity: ",y.rarity),r.a.createElement("li",{className:H.a.modalParamsItem},"Artist: ",y.artist),y.evolvesFrom&&r.a.createElement("li",{className:H.a.modalParamsItem},"EvolvesFrom: ",y.evolvesFrom)),r.a.createElement(l.b,{to:"/card-page",className:H.a.detailsButton},"More details"))))),r.a.createElement(F,null,r.a.createElement("div",{className:H.a.categories},r.a.createElement("div",{className:H.a.header},r.a.createElement(G,null)),r.a.createElement("aside",{className:H.a.aside},r.a.createElement("div",{className:H.a.asideRow},r.a.createElement(q,{name:"Type",list:v,setTypesValue:h,value:g})),r.a.createElement("div",{className:H.a.asideRow},r.a.createElement(q,{name:"Subtype",list:f,setTypesValue:h,value:O}))),r.a.createElement("div",{className:H.a.contentWrapper},b?r.a.createElement(ee,null):_.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:H.a.content},_.map((function(e,t){var a=e.id,n=e.imageUrl,s=e.name,c=e.artist;return r.a.createElement(ne,{key:a+t,id:a,image:n,name:s,artist:c,setPokemonPreview:S})}))),r.a.createElement(me,null)):r.a.createElement(ce,null,"\u041f\u043e\u043a\u0435\u043c\u043e\u043d\u0430 \u0441 \u0442\u0430\u043a\u0438\u043c \u0441\u043e\u0447\u0435\u0442\u0430\u043d\u0438\u0435\u043c \u0442\u0438\u043f\u0430 \u0438 \u043f\u043e\u0434\u0442\u0438\u043f\u0430 \u043d\u0435\u0442")))))},de=a(5),Ee=a.n(de);var ye=function(){var e=Object(n.useContext)(E),t=Object(u.a)(e,1)[0].pokemon,a=Object(p.f)();return Object(n.useEffect)((function(){t||a.push("/")}),[t,a]),r.a.createElement(F,null,t&&r.a.createElement("div",{className:Ee.a.card},r.a.createElement("div",{className:Ee.a.headerWrapper},r.a.createElement(G,null)),r.a.createElement("div",{className:Ee.a.content},r.a.createElement("div",{className:Ee.a.contentRow},r.a.createElement("img",{className:Ee.a.image,src:t.imageUrlHiRes,alt:t.name}),r.a.createElement("div",{className:Ee.a.params},r.a.createElement("ul",{className:Ee.a.mainParams},r.a.createElement("li",{className:Ee.a.paramsItem},"Pokemon name: ",t.name),t.types&&r.a.createElement("li",{className:Ee.a.paramsItem},"Type: ",t.types.join(" ")),r.a.createElement("li",{className:Ee.a.paramsItem},"SubType: ",t.subtype)),r.a.createElement("ul",{className:Ee.a.secondaryParams},t.attacks&&r.a.createElement("li",{className:Ee.a.paramsItem},"attackDamage: ",t.attacks.map((function(e){return e.damage})).join(", ")),t.attacks&&r.a.createElement("li",{className:Ee.a.paramsItem},"attackCost: ",t.attacks.map((function(e){return e.cost.join(", ")})).join(", ")),t.resistances&&r.a.createElement("li",{className:Ee.a.paramsItem},"resistances: ",t.resistances.map((function(e){return e.type})).join(", ")),t.evolvesFrom&&r.a.createElement("li",{className:Ee.a.paramsItem},"evolvesFrom: ",t.evolvesFrom)))),t.attacks&&r.a.createElement("div",{className:Ee.a.description},t.attacks.map((function(e){return e.text})).join(" ")))))};var ve=function(){var e=Object(p.f)(),t=Object(n.useContext)(E),a=Object(u.a)(t,2),s=a[0],c=s.typesValue,l=s.subtypesValue,o=s.page,_=s.pageSize,y=a[1],f=Object(n.useContext)(v),b=Object(u.a)(f,1)[0].isLoggedIn;return Object(n.useEffect)((function(){b?function(){var e=Object(i.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e="".concat(d,"cards/?pageSize=").concat(_,"&page=").concat(o);return c&&(e+="&types=".concat(c)),l&&(e+="&subtype=".concat(l)),e},y({type:"SET_LOADING",payload:!0}),e.next=4,fetch(t());case 4:return a=e.sent,y({type:"SET_TOTAL_COUNT",payload:a.headers.get("total-count")}),e.next=8,a.json();case 8:n=e.sent,r=n.cards,y({type:"SET_LOADING",payload:!1}),y({type:"SET_POKEMONS",payload:r});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():e.push("/login")}),[o,c,_,l,b,e,y]),r.a.createElement("div",{className:"App"},r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/login",component:I}),r.a.createElement(p.a,{path:"/password-confirmation",component:M}),r.a.createElement(p.a,{path:"/",exact:!0,component:_e}),r.a.createElement(p.a,{path:"/card-page",component:ye})))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,null,r.a.createElement(f,null,r.a.createElement(y,null,r.a.createElement(ve,null))))),document.getElementById("root"))}],[[48,1,2]]]);
//# sourceMappingURL=main.c30e54ae.chunk.js.map